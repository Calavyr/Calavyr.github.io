<!DOCTYPE html><html>

<head>
<title>TealDR's (bad) Aim Trainer</title>
</head>

<style>
body {
width: 100%;
height: 100%;
margin: 0;
}

#screen {
z-index: 4;
display: block;
position: absolute;
top: 0;
left: 0;
right: 0;
bottom: 0;
cursor: url('https://tealdr.github.io/images/crosshair.png') 12 12, auto;
}

#score {
z-index: 5;
top: 5%;
left: 10%;
position: absolute;
color: red;
}


#settings {
z-index: 6;
display: none;
position: absolute;
top: 10%;
left: 10%;
right: 10%;
bottom: 10%;
width: 80%;
height: 80%;
background-color: #f5f5f5;
text-align: center;
font-size: 24px;
}

.noselect {
-webkit-touch-callout: none; 
-webkit-user-select: none; 
-khtml-user-select: none; 
-moz-user-select: none; 
-ms-user-select: none; 
user-select: none; 
}

</style>

<body id="body" onLoad="onLoadStuff()">
<div id="score" class="noselect">
<h1 id="scoreCount">0</h1>
</div>

<div id="settings">
<h1>Settings</h1>
<p>Target Size: </p>
<span id="circleDisplay">25</span>
<input type="range" min="5" max="45" id="circleSlider" class="noselect">
<p>Theme: </p>
<button onClick="changeTheme()">Change</button>
</div>


<canvas id="screen"></canvas>
</body>

<script>
const body = document.getElementById("body");

var score = 0;


var canvas = document.getElementById("screen");
var ctx = canvas.getContext("2d");
var circleRadius = 25;
var maxX = window.innerWidth - circleRadius;
var maxY = window.innerHeight - circleRadius;
var minX = circleRadius, minY = circleRadius;

var slider = document.getElementById("circleSlider")


var settingsBoolean = false;
var settings = document.getElementById("settings")

var theme = "light";


canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

function drawCircle() {
	canvas = document.getElementById("screen");
	ctx = canvas.getContext("2d");
	ctx.beginPath();
	ctx.arc(
	randomNumber(minX, maxX),
	randomNumber(minY, maxY),
	circleRadius,
	0,
	2 * Math.PI)
	ctx.fill()
	ctx.stroke()
}

function clearCanvas() {
ctx.beginPath();
ctx.clearRect(0, 0, canvas.width, canvas.height);
ctx.stroke();
drawCircle();
}

window.addEventListener('resize', () => {
	canvas = document.getElementById("screen")
	canvas.width = window.innerWidth
	canvas.height = window.innerHeight
	drawCircle()
})

slider.oninput = function() {
	clearCanvas()
	document.getElementById("circleDisplay").innerHTML = slider.value;
	circleRadius = slider.value;
	maxX = window.innerWidth - circleRadius;
	maxY = window.innerHeight - circleRadius;
	minX = circleRadius, minY = circleRadius;
	
}

//Aim
document.addEventListener("click", function() {
  let pixel = ctx.getImageData(event.clientX, event.clientY, 1, 1);
  let hue = pixel.data
  if (theme == "light") {
	if (hue[0] == 18 && hue[1] == 18 && hue[2] == 18 && hue[3] == 255) {
		clearCanvas()
		scoreUp()
	}
  } else if (theme == "dark") {
	if (hue[0] == 255 && hue[1] == 255 && hue[2] == 255 && hue[3] == 255) {
		clearCanvas()
		scoreUp()
	}
  }
});

document.body.onkeyup = function(e) {
  if (e.key == "m" || e.code =="KeyM" || e.keyCode == 77) {
	toggleSettings()
  } else if (e.key == "r" || e.code =="KeyR" || e.keyCode == 82) {
	reset()
  }
}

function reset() {
clearCanvas()
score = 0
document.getElementById("scoreCount").innerHTML = score
}

function toggleSettings() {
	if (settingsBoolean == true) {
		settingsBoolean = false;
		settings.style.display = "none";
	} else if (settingsBoolean == false) {
		settingsBoolean = true;
		settings.style.display = "block";
	}
}

function changeTheme() {
if (theme == "dark") {
	theme = "light"
	ctx.strokeStyle = "#121212"
	ctx.fillStyle = "#121212"
	body.style.background = "#ffffff"
	settings.style.backgroundColor = "#f5f5f5"
	settings.style.color = "black"
} else if (theme == "light") {
	theme = "dark"
	ctx.strokeStyle = "#ffffff"
	ctx.fillStyle = "#ffffff"
	body.style.background = "#121212"
	settings.style.backgroundColor = "#000000"
	settings.style.color = "white"
}
clearCanvas()
}

function scoreUp() {
score += 1
document.getElementById("scoreCount").innerHTML = score
}


function randomNumber(min, max) {
  return Math.floor(Math.random() * (max - min + 1) + min)
}

function onLoadStuff() {
changeTheme()
reset()
}

</script>
